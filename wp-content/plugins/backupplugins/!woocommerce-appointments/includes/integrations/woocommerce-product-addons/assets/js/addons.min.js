jQuery(function(v){var w={isGroupedMixedProductType:function(){var a=v(".product-type-grouped"),o=0,t=0;return!!(a.length&&(a.find(".group_table tr.product").each(function(){0<v(this).find(".input-text.qty").val()&&(v(this).find(".entry-summary .subscription-details").length?o++:t++)}),0<o&&0<t))},isGroupedSubsSelected:function(){var a=v(".product-type-grouped"),o=!1;return a.length&&a.find(".group_table tr.product").each(function(){if(0<v(this).find(".input-text.qty").val()&&v(this).find(".entry-summary .subscription-details").length)return!(o=!0)}),o},formatMoney:function(a){return accounting.formatMoney(a,{symbol:woocommerce_addons_params.currency_format_symbol,decimal:woocommerce_addons_params.currency_format_decimal_sep,thousand:woocommerce_addons_params.currency_format_thousand_sep,precision:woocommerce_addons_params.trim_trailing_zeros?0:woocommerce_addons_params.currency_format_num_decimals,format:woocommerce_addons_params.currency_format})},getCostByTax:function(a,o){return woocommerce_addons_params.price_include_tax&&woocommerce_addons_params.display_include_tax?a:woocommerce_addons_params.price_include_tax&&!woocommerce_addons_params.display_include_tax?o:!woocommerce_addons_params.price_include_tax&&woocommerce_addons_params.display_include_tax?o:woocommerce_addons_params.price_include_tax||woocommerce_addons_params.display_include_tax?o:a},init:function(a){var m=a,f=!!m.hasClass("variations_form")&&m.find('input[name="variation_id"], input.variation_id');m.on("click",".reset_variations",function(){v.each(m.find(".product-addon"),function(){var a=v(this).find(".addon");(a.is(":checkbox")||a.is(":radio"))&&a.prop("checked",!1),a.is("select")&&a.prop("selectedIndex",0),(a.is(":text")||a.is("textarea")||a.is('input[type="number"]')||a.is('input[type="file"]'))&&a.val("")}),m.trigger("woocommerce-product-addons-update")}).on("mouseup","input[type=number]",function(){v(this).trigger("woocommerce-product-addons-update")}).on("keyup change",".wc-pao-addon input, .wc-pao-addon textarea",function(){if(0<v(this).attr("maxlength")){var a=v(this).val(),o=v(this).attr("maxlength")-a.length;v(this).next(".wc-pao-addon-chars-remaining").find("span").text(o)}}).on("keyup",".wc-pao-addon-custom-textarea, .wc-pao-addon-custom-text, .wc-pao-addon-custom-price",function(){v(this).trigger("woocommerce-product-addons-update")}).on("change",".wc-pao-addon input, .wc-pao-addon textarea, .wc-pao-addon select, input.qty",function(){v(this).trigger("woocommerce-product-addons-update")}).on("found_variation",function(a,o){var t=v(this),e=t.find("#product-addons-total");if("undefined"!=typeof o.display_price)e.data("price",o.display_price);else if(v(o.price_html).find(".amount:last").length){var n=v(o.price_html).find(".amount:last").text();n=(n=(n=(n=n.replace(woocommerce_addons_params.currency_format_symbol,"")).replace(woocommerce_addons_params.currency_format_thousand_sep,"")).replace(woocommerce_addons_params.currency_format_decimal_sep,".")).replace(/[^0-9\.]/g,""),n=parseFloat(n),e.data("price",n)}t.trigger("woocommerce-product-addons-update")}).on("woocommerce-product-addons-update",function(){var h=0,y=0,e=m.find("#product-addons-total"),a=f&&0<f.length,o=m.find(".wcsatt-options-product"),t=0<o.length;if(product_id=a?f.val():e.data("product-id"),product_price=e.data("price"),product_type=e.data("type"),qty=parseFloat(m.find("input.qty").val()),addons=[],""===product_price&&"undefined"!=typeof custom_gift_card_amount&&custom_gift_card_amount.length&&0<custom_gift_card_amount.val()&&(product_price=custom_gift_card_amount.val()),woocommerce_addons_params.is_bookings&&v(".wc-bookings-booking-cost").length&&(product_price=parseFloat(v(".wc-bookings-booking-cost").attr("data-raw-price"))),v(".wc-appointments-appointment-cost").length,m.find(".wc-pao-required-addon").each(function(){var a=v(this).find(":checkbox[required]");a.change(function(){a.is(":checked")?a.removeAttr("required"):a.attr("required","required")})}),m.find(".wc-pao-addon-field").each(function(){var a=v(this),o=a.parents(".wc-pao-addon"),t=o.find(".wc-pao-addon-name").length?o.find(".wc-pao-addon-name").data("addon-name"):"",e="",n=0,d=0,c=a.data("price-type"),i=0,r=a.data("duration-type"),s=!1,p={},l=!!o.find(".wc-pao-addon-name").length&&o.find(".wc-pao-addon-name").data("has-per-person-pricing"),u=!!o.find(".wc-pao-addon-name").length&&o.find(".wc-pao-addon-name").data("has-per-block-pricing");if(a.is(".wc-pao-addon-custom-price")){if(!a.val())return;s=!0,n=a.val(),d=a.val(),c="flat_fee"}else if(a.is(".wc-pao-addon-input-multiplier")){if(isNaN(a.val())||""===a.val()?(a.val(""),a.closest("p").find(".wc-pao-addon-alert").show()):(""!==a.val()&&a.val(Math.ceil(a.val())),a.closest("p").find(".wc-pao-addon-alert").hide()),!a.val())return;n=a.data("price")*a.val(),d=a.data("raw-price")*a.val(),a.data("duration")*a.val(),i=a.data("raw-duration")*a.val()}else if(a.is(".wc-pao-addon-checkbox, .wc-pao-addon-radio")){if(!a.is(":checked"))return;e=a.data("label"),n=a.data("price"),d=a.data("raw-price"),a.data("duration"),i=a.data("raw-duration")}else if(a.is(".wc-pao-addon-image-swatch-select, .wc-pao-addon-select")){if(!a.find("option:selected")||""===a.find("option:selected").val())return;c=a.find("option:selected").data("price-type"),r=a.find("option:selected").data("duration-type"),a.val()&&(e=a.find("option:selected").data("label"),n=a.find("option:selected").data("price"),d=a.find("option:selected").data("raw-price"),a.find("option:selected").data("duration"),i=a.find("option:selected").data("raw-duration"))}else{if(!a.val())return;n=a.data("price"),d=a.data("raw-price"),a.data("duration"),i=a.data("raw-duration")}if(n=n||0,d=d||0,0,i=i||0,("booking"===product_type||"accommodation-booking"===product_type)&&woocommerce_addons_params.is_bookings){var _=qty=0;void 0!==v("#wc_bookings_field_duration")&&0<v("#wc_bookings_field_duration").val()&&(_=v("#wc_bookings_field_duration").val());var m=v("#wc_bookings_field_persons"),f=0;1===m.length?f=parseInt(f,10)+parseInt(m.val(),10):v(".wc-bookings-booking-form").find("input").each(function(){var a=this.id.match(/wc_bookings_field_persons_(\d+)/);null!=a&&v("#"+a[0]).length&&(f=parseInt(f,10)+parseInt(v("#"+a[0]).val(),10))}),0===qty&&v(".wc-bookings-booking-cost").length&&(qty=1),l&&(qty*=f),u&&(qty*=_)}switch(c){case"flat_fee":p.cost=parseFloat(n),p.cost_raw=parseFloat(d);break;case"quantity_based":p.cost_pu=parseFloat(n),p.cost_raw_pu=parseFloat(d),p.cost=p.cost_pu*qty,p.cost_raw=p.cost_raw_pu*qty;break;case"percentage_based":p.cost_pct=parseFloat(n)/100,p.cost_raw_pct=parseFloat(d)/100,p.cost=parseFloat(product_price)*p.cost_pct*qty,p.cost_raw=parseFloat(product_price)*p.cost_raw_pct*qty}switch(h+=p.cost||0,y+=p.cost_raw||0,r){case"flat_time":case"":p.duration=i,p.duration_raw=i;break;case"quantity_based":p.duration_pu=i,p.duration_raw_pu=i,p.duration=p.duration_pu*qty,p.duration_raw=p.duration_raw_pu*qty}if(void 0!==e){if("number"==typeof e||e.length)p.name=t+(e?" - "+e:"");else{var w=a.val(),g=parseInt(woocommerce_addons_params.trim_user_input_characters,10);a.is(".wc-pao-addon-file-upload")&&(w=w.replace(/^.*[\\\/]/,"")),g<w.length&&(w=w.slice(0,g)+"..."),p.name=t+" - "+w}p.is_custom_price=s,p.price_type=c,p.duration_type=r,addons.push(p)}}),e.data("price_data",addons),qty){var n,d,c,i;w.formatMoney(h);if("undefined"!=typeof product_price&&product_id&&(n=v(".wc-bookings-booking-form").length?parseFloat(product_price):v(".wc-appointments-appointment-cost").length?parseFloat(product_price):parseFloat(product_price*qty),d=w.formatMoney(n+h)),t){var r=o.find("input:checked");r.val()&&(c=r.parent().find(".subscription-details"))}else m.parent().find(".subscription-details").length&&(m.hasClass("bundle_data")||(c=m.parent().find(".subscription-details"),f&&0<f.length&&(c=m.parent().find(".woocommerce-variation .subscription-details"))));if(c&&0<c.length&&(i=" "+c.clone().wrap("<p>").parent().html()),"grouped"===product_type?i&&!isGroupedMixedProductType()&&isGroupedSubsSelected()&&(i,d&&(d+=i)):i&&d&&(d+=i),d&&"1"==e.data("show-sub-total")){var s=m.find(".wc-pao-addon-container").data("product-name"),p=w.formatMoney(n);if(v(".wc-bookings-booking-form").length)var l='<div class="product-addon-totals"><ul><li><div class="wc-pao-col1"><strong>'+s+'</strong></div><div class="wc-pao-col2"><strong>'+p+"</strong></div></li>";else l='<div class="product-addon-totals"><ul><li><div class="wc-pao-col1"><strong>'+qty+woocommerce_addons_params.quantity_symbol+s+'</strong></div><div class="wc-pao-col2"><strong>'+p+"</strong></div></li>";addons.length&&(v.each(addons,function(a,o){if("quantity_based"===o.price_type){var t=w.getCostByTax(o.cost_raw,o.cost),e=0===t?"-":w.formatMoney(t);l=l+'<li class="wc-pao-row-quantity-based"><div class="wc-pao-col1">'+o.name+'</div><div class="wc-pao-col2"><span class="amount">'+e+"</span></div></li>"}}),v.each(addons,function(a,o){if("quantity_based"!==o.price_type){if("percentage_based"!==o.price_type)var t=w.getCostByTax(o.cost_raw,o.cost);else t=o.cost_raw;var e=0===t?"-":'<span class="amount">'+w.formatMoney(t)+"</span>";l=l+'<li><div class="wc-pao-col1"><strong>'+o.name+'</strong></div><div class="wc-pao-col2">'+e+"</div></li>"}}));var u="",_=void 0===e.data("i18n_sub_total")?woocommerce_addons_params.i18n_sub_total:e.data("i18n_sub_total");if(!woocommerce_addons_params.price_display_suffix||!woocommerce_addons_params.tax_enabled)return l=l+'<li class="wc-pao-subtotal-line"><p class="price">'+_+' <span class="amount">'+d+"</span></p></li></ul></div>",e.html(l),void m.trigger("updated_addons");if(!1==-1<woocommerce_addons_params.price_display_suffix.indexOf("{price_including_tax}")&&!1==-1<woocommerce_addons_params.price_display_suffix.indexOf("{price_excluding_tax}"))return l=l+'<li class="wc-pao-subtotal-line"><strong>'+_+' <span class="amount">'+d+"</span> "+woocommerce_addons_params.price_display_suffix+"</strong></li></ul></div>",e.html(l),void m.trigger("updated_addons");v.ajax({type:"POST",url:woocommerce_addons_params.ajax_url,data:{action:"wc_product_addons_calculate_tax",product_id:product_id,add_on_total:h,add_on_total_raw:y,qty:qty},success:function(a){if("SUCCESS"==a.result){u='<small class="woocommerce-price-suffix">'+woocommerce_addons_params.price_display_suffix+"</small>";var o=w.formatMoney(a.price_including_tax),t=w.formatMoney(a.price_excluding_tax);u=(u=u.replace("{price_including_tax}",o)).replace("{price_excluding_tax}",t),l=l+'<li class="wc-pao-subtotal-line"><p class="price">'+_+' <span class="amount">'+d+"</span> "+u+" </p></li></ul></div>",e.html(l),m.trigger("updated_addons")}else l=l+'<li class="wc-pao-subtotal-line"><p class="price">'+_+' <span class="amount">'+d+"</span></p></li></ul></div>",e.html(l),m.trigger("updated_addons")},error:function(){l=l+'<li class="wc-pao-subtotal-line"><p class="price">'+_+' <span class="amount">'+d+"</span></p></li></ul></div>",e.html(l),m.trigger("updated_addons")}})}else e.empty(),m.trigger("updated_addons")}else e.empty(),m.trigger("updated_addons")}).on("click touchstart",".wc-pao-addon-image-swatch",function(a){a.preventDefault();var o=v(this).data("value"),t=v(this).parents(".wc-pao-addon-wrap"),e=v.parseHTML(v(this).data("price"));t.prev("label").find(".wc-pao-addon-image-swatch-price").remove(),t.find(".wc-pao-addon-image-swatch").removeClass("selected"),v(this).addClass("selected"),t.find(".wc-pao-addon-image-swatch-select").val(o),t.prev("label").append(v(e)),m.trigger("woocommerce-product-addons-update")}),m.find(" .wc-pao-addon-custom-text, .wc-pao-addon-custom-textarea").each(function(){0<v(this).attr("maxlength")&&v(this).after('<small class="wc-pao-addon-chars-remaining"><span>'+v(this).attr("maxlength")+"</span> "+woocommerce_addons_params.i18n_remaining+"</small>")}),v("#credit_called").on("keyup",function(){m.trigger("woocommerce-product-addons-update")}),m.find(".wc-pao-addon-custom, .wc-pao-addon-custom-textarea, .wc-pao-addon input, .wc-pao-addon textarea, .wc-pao-addon select, input.qty, .variations select").change();var o=v(".wc-pao-addon-image-swatch");o.length&&o.tipTip({delay:200})}};v("body").on("quick-view-displayed",function(){v(this).find(".cart:not(.cart_group)").each(function(){w.init(v(this))})}),v("body .component").on("wc-composite-component-loaded",function(){v(this).find(".cart").each(function(){w.init(v(this))})}),v("body").find(".cart:not(.cart_group)").each(function(){w.init(v(this))})});