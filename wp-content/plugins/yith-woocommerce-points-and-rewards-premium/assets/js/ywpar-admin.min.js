jQuery(document).ready(function(c){"use strict";var t=c(document).find("#yit_ywpar_options_extra_points-container").find(".ywpar-section"),e=t.find(".section-head"),n=e.find(".ywpar-remove"),a=e.find(".ywpar-active"),i=t.find(".yith-ywpar-eventype-select"),o="undefined"!=typeof yith_ywpar_admin&&yith_ywpar_admin.block_loader,r="undefined"!=typeof yith_ywpar_admin&&yith_ywpar_admin.del_msg,d=function(t){t.each(function(){var t=c(this),e=t.data("field"),n=t.find("option:selected");s(t,n.val(),e),t.on("change",function(){e=t.data("field"),n=t.find("option:selected"),s(t,n.val(),e)})})},s=function(t,n,e){t.parents(".ywpar-select-wrapper").find("tr.deps-"+e).each(function(){var t=c(this).data("type").split(";");if(-1!==c.inArray(n,t))c(this).show();else if(c(this).hide(),void 0!==c(this).data("rel")){var e="deps-"+c(this).data("rel");c(this).parents(".ywpar-section").find("."+e).hide()}})};c(document).on("click",".ywpar-add-row",function(){var t=c(this),e=t.closest("table"),n=t.closest("tr"),o=parseInt(n.data("index")),a=n.clone(),i=e.find("tr"),r=1;i.each(function(){var t=c(this).data("index");r<t&&(r=t)});var s=r+1;a.attr("data-index",s),a.find("[name*='extra_points']").each(function(){var t=c(this),e=t.attr("name"),n=t.attr("id"),a=e.replace("[extra_points]["+o+"]","[extra_points]["+s+"]"),i=n.replace("[extra_points]["+o+"]","[extra_points]["+s+"]");t.attr("name",a),t.attr("id",i),t.val("")}),a.find(".remove-row").removeClass("hide-remove"),a.find(".chosen-container").remove(),e.append(a);var p=a.find(".yith-ywpar-eventype-select");a.parents(".ywpar-section");d(p)}),c(document).on("click","#yit_ywpar_options_extra_points-container .remove-row",function(){c(this).closest("tr").remove()}),n.on("click",function(t){t.stopPropagation();var e=c(this),n=e.data("section"),a=e.parents(".ywpar-section");1==window.confirm(r)&&(o&&a.block({message:null,overlayCSS:{background:"#fff url("+o+") no-repeat center",opacity:.5,cursor:"none"}}),c.post(yith_ywpar_admin.ajaxurl,{action:"yith_dynamic_pricing_section_remove",section:n},function(t){a.remove()}))}),a.on("click",function(t){t.stopPropagation();var e=c(this),n=(e.data("section"),e.parents(".section-head").find(".active-hidden-field"));e.hasClass("activated")?(e.removeClass("activated"),n.val("no")):(e.addClass("activated"),n.val("yes"))}),d(i),c(".ywpar_point_earned_dates_fields").each(function(){var a=c(this).find("input").datepicker({defaultDate:"",dateFormat:"yy-mm-dd",numberOfMonths:1,showButtonPanel:!0,onSelect:function(t){var e=c(this).data("datepicker"),n=c.datepicker.parseDate(e.settings.dateFormat||c.datepicker._defaults.dateFormat,t,e.settings);a.not(this).datepicker("option","",n)}})}),c(".plugin-option .yit_options .panel-datepicker").each(function(){c(this).datepicker({dateFormat:"yy-mm-dd"})}),c("#yit_ywpar_options_apply_points_previous_order_btn").on("click",function(t){t.preventDefault();var e=c(this).prev().val(),n=c("#yit_ywpar_options_apply_points_previous_order-container .option");n.find(".response").remove(),o&&n.block({message:null,overlayCSS:{background:"transparent",opacity:.5,cursor:"none"}}),c.ajax({type:"POST",url:yith_ywpar_admin.ajaxurl,dataType:"json",data:"action=ywpar_apply_previous_order&from="+e+"&security="+yith_ywpar_admin.apply_previous_order_none,success:function(t){n.unblock(),n.append('<span class="response">'+t+"</span>")}})}),c(".ywrac_reset_points").on("click",function(t){if(t.preventDefault(),!confirm(yith_ywpar_admin.reset_points_confirm))return!1;var e=c("#yit_ywpar_options_reset_points-container .option");e.find(".response").remove(),o&&e.block({message:null,overlayCSS:{background:"transparent",opacity:.5,cursor:"none"}}),c.ajax({type:"POST",url:yith_ywpar_admin.ajaxurl,dataType:"json",data:"action=ywpar_reset_points&security="+yith_ywpar_admin.reset_points,success:function(t){e.unblock(),e.append('<span class="response">'+t+"</span>")}})}),c("#yit_ywpar_options_apply_points_from_wc_points_rewards_btn").on("click",function(t){t.preventDefault();var e=c(this).prev().val(),n=c("#yit_ywpar_options_apply_points_from_wc_points_rewards-container .option");n.find(".response").remove(),o&&n.block({message:null,overlayCSS:{background:"transparent",opacity:.5,cursor:"none"}}),c.ajax({type:"POST",url:yith_ywpar_admin.ajaxurl,dataType:"json",data:"action=ywpar_apply_wc_points_rewards&from="+e+"&security="+yith_ywpar_admin.apply_wc_points_rewards,success:function(t){n.unblock(),n.append('<span class="response">'+t+"</span>")}})}),c("#yit_ywpar_options_fix_expiration_points-container .button").on("click",function(t){t.preventDefault();var e=c("#yit_ywpar_options_fix_expiration_points-container");e.find(".response").remove(),o&&e.block({message:null,overlayCSS:{background:"transparent",opacity:.5,cursor:"none"}}),c.ajax({type:"POST",url:yith_ywpar_admin.ajaxurl,dataType:"json",data:"action=ywpar_fix_expiration_points&security="+yith_ywpar_admin.fix_expiration_points,success:function(t){e.unblock(),e.append('<span class="response">'+t+"</span>"),location.reload(!1)}})});var p=c("#yit_ywpar_options_conversion_rate_method"),_=function(t){"fixed"==t?(c(document).find('input[data-hide="percentage_method"]').closest("tr").hide(),c(document).find(".percentual_method").closest("tr").hide(),c(document).find('input[data-hide="fixed_method"]').closest("tr").show(),c(document).find(".fixed_method").closest("tr").show()):"none"==t?(c(document).find('input[data-hide="percentage_method"]').closest("tr").hide(),c(document).find(".percentual_method").closest("tr").hide(),c(document).find('input[data-hide="fixed_method"]').closest("tr").hide(),c(document).find(".fixed_method").closest("tr").hide()):"percentage"==t&&(c(document).find('input[data-hide="percentage_method"]').closest("tr").show(),c(document).find(".percentual_method").closest("tr").show(),c(document).find('input[data-hide="fixed_method"]').closest("tr").hide(),c(document).find(".fixed_method").closest("tr").hide())};_(p.val()),p.on("change",function(){var t=c(this).val();_(t)}),c("#ywpar_import_points").length&&c("#ywpar_import_points").closest("form").attr("enctype","multipart/form-data"),c("#ywpar_import_points").on("click",function(t){t.preventDefault();var e=c("#type_action").val();c(".ywpar_safe_submit_field").val(e+"_points"),c(this).closest("form").submit()}),c("#type_action").on("change",function(){var t=c(this);"import"==t.val()?t.closest(".option").find("[data-val='import']").show():t.closest(".option").find("[data-val='import']").hide()}),c("#type_action").change(),c("#ywpar-notice-is-dismissable").find(".notice-dismiss").on("click",function(){c.cookie("ywpar_notice","dismiss",{path:"/"})})});